{"version":3,"sources":["webpack/bootstrap c0bf35784fe59af9e132","./frontend/twitter.js","./frontend/follow_toggle.js","./frontend/users_search.js","./frontend/tweet_compose.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;AACH,EAAC;;;;;;;ACpBD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,sBAAqB,YAAY;AACjC;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;;AAEA;;;;;;;;AC9DA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;;AAEA;AACA;AACA;AACA,oDAAmD,MAAM;AACzD,sBAAqB,YAAY;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;;AAEA;;;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oCAAmC,6CAA6C;AAChF,IAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap c0bf35784fe59af9e132\n **/","const FollowToggle = require(\"./follow_toggle.js\");\nconst UsersSearch = require(\"./users_search.js\");\nconst TweetCompose = require(\"./tweet_compose.js\");\n\n$(function () {\n  const $toggle = $(\"button.follow-toggle\");\n  const $search = $(\"nav.users-search\");\n  const $tweets = $(\".tweet-compose\");\n\n  $toggle.each( (idx, el) => {\n    new FollowToggle(el);\n  });\n\n  $search.each( (idx, el) => {\n    new UsersSearch(el);\n  });\n\n  $tweets.each( (idx, el) => {\n    new TweetCompose(el);\n  })\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/twitter.js\n ** module id = 0\n ** module chunks = 0\n **/","function FollowToggle(el, options) {\n  this.$el = $(el);\n  this.userId = this.$el.data(\"user-id\") || options.userId;\n  this.followState = this.$el.data(\"initial-follow-state\") || options.followState;\n  this.render();\n  this.handleClick();\n}\n\nFollowToggle.prototype.render = function () {\n  if(this.followState === \"unfollowed\"){\n    this.$el.text(\"Follow!\");\n    this.$el.prop(\"disabled\", false);\n  }else if(this.followState === \"followed\"){\n    this.$el.text(\"Unfollow!\");\n    this.$el.prop(\"disabled\", false);\n  }else if(this.followState === \"following\"){\n    this.$el.text(\"following\");\n    this.$el.prop(\"disabled\", true);\n  }else if(this.followState === \"unfollowing\"){\n    this.$el.text(\"unfollowing\");\n    this.$el.prop(\"disabled\", true);\n  }\n};\n\nFollowToggle.prototype.toggle = function () {\n  if(this.followState === \"unfollowed\"){\n    this.followState = \"following\";\n  }else if(this.followState === \"followed\"){\n    this.followState = \"unfollowing\";\n  }else if(this.followState === \"following\"){\n    this.followState = \"followed\";\n  }else if(this.followState === \"unfollowing\"){\n    this.followState = \"unfollowed\";\n  }\n  this.render();\n};\n\nFollowToggle.prototype.handleClick = function () {\n  const self = this;\n  this.$el.on(\"click\", event => {\n    event.preventDefault();\n    const formData = $(this).serialize();\n    let method;\n    if (self.followState === 'unfollowed') {\n      method = 'POST';\n      self.toggle();\n    } else {\n      method = 'DELETE';\n      self.toggle();\n    };\n    $.ajax({\n      type: `${method}`,\n      url: `/users/${self.userId}/follow`,\n      data: formData,\n      dataType: \"json\",\n      success(){\n        self.toggle();\n      }\n    });\n  });\n};\n\nmodule.exports = FollowToggle;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/follow_toggle.js\n ** module id = 1\n ** module chunks = 0\n **/","const FollowToggle = require('./follow_toggle.js');\n\nfunction UsersSearch(el){\n  this.$el = $(el);\n  this.$input = this.$el.find('input');\n  this.$ul = this.$el.find('ul.users');\n  this.handleInput();\n}\n\nUsersSearch.prototype.handleInput = function() {\n  const self = this;\n  this.$input.on(\"keypress\", event => {\n    const inputData = $(this.$input).serialize();\n    console.log(inputData);\n    $.ajax({\n      type: \"GET\",\n      url: \"/users/search\",\n      data: inputData,\n      dataType: \"json\",\n      success(usersList){\n        console.log(usersList);\n        self.renderResults(usersList);\n      }\n    });\n  });\n}\n\nUsersSearch.prototype.renderResults = function (results) {\n  this.$ul.text(\"\");\n  results.forEach( (el) => {\n    const $anchor = $('<a>').attr(\"href\",`/users/${el.id}`)\n            .text(`${el.username}`);\n    const $li = $('<li>').append($anchor);\n    const $button = $('<button>');\n    let follow;\n    console.log(el);\n    if (el.followed) {\n      follow = \"followed\";\n    }else {\n      follow = \"unfollowed\";\n    }\n\n    let options = {\n      userId: el.id,\n      followState: follow\n    }\n    new FollowToggle($button, options);\n\n    $li.append($button);\n    this.$ul.append($li);\n  })\n}\n\nmodule.exports = UsersSearch;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/users_search.js\n ** module id = 3\n ** module chunks = 0\n **/","\nfunction TweetCompose(el) {\n  this.$el = $(el);\n  this.$el;\n  this.submit();\n  this.TextCount();\n  this.addMentionedUser();\n  this.removeMentionedUser();\n}\n\nTweetCompose.prototype.TextCount = function () {\n  this.$el.find('textarea').on(\"input\", event => {\n    this.$el.find('.chars-left')\n    .text(`Characters remaining: ${140 - this.$el.find('textarea').val().length}`);\n  });\n};\n\nTweetCompose.prototype.removeMentionedUser = function () {\n  $('div.remove-mention').delegate(\"click\", \"a\", event => {\n    let $tag = event.currentTarget();\n    $tag.parent.remove();\n\n  })\n};\n\nTweetCompose.prototype.addMentionedUser = function () {\n  $('a.add-mentioned-user').on(\"click\", event =>{\n    const script = $('script.add-mentioned-user').html();\n    $('div.mentioned-users').append(script);\n  })\n\n  // console.log(script);\n};\n\nTweetCompose.prototype.submit = function () {\n  this.$el.on(\"submit\", event => {\n    const self = this;\n    event.preventDefault();\n    const output = $(this.$el).serialize();\n    this.disableInputs();\n\n    $.ajax({\n      type: 'POST',\n      url: '/tweets',\n      dataType: 'json',\n      data: output,\n      success(tweet){\n        self.handleSuccess(tweet);\n      }\n    });\n  });\n};\n\nTweetCompose.prototype.disableInputs = function () {\n  const $inputs = $(':input');\n  $inputs.prop(\"disabled\", true);\n};\n\nTweetCompose.prototype.clearInput = function () {\n  // debugger;\n  const $inputs = $('.tweetcontent');\n  $(':input').prop(\"disabled\", false);\n  $inputs.prop(\"selected\", false);;\n  $inputs.val(\"\");\n};\n\nTweetCompose.prototype.handleSuccess = function (tweet) {\n  this.clearInput();\n  const $ul = $(this.$el.data(\"tweet-ul\"));\n  const string = JSON.stringify(tweet);\n\n  const $li = $('<li>').text(string);\n  $ul.append($li);\n};\n\nmodule.exports = TweetCompose;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/tweet_compose.js\n ** module id = 4\n ** module chunks = 0\n **/"],"sourceRoot":""}